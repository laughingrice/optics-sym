*{box-sizing:border-box;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
body,html{height:100%;margin:0}
/* prevent layout shift when panels expand/collapse: keep scrollbar gutter stable */
body{overflow-y:scroll; scrollbar-gutter: stable both-edges;}
/* make left/right side panels scroll internally instead of growing page height */
#palette,#properties{max-height:calc(100vh - 160px);overflow:auto}
header{padding:12px 20px;background:#0f172a;color:#fff}
header h1{margin:0;font-size:18px}
main{display:grid;/* left/right column widths are controlled by CSS vars for collapse behavior */
  --left-min:160px; --left-max:198px; /* reduced by ~10% */
  --right-min:216px; --right-max:288px; /* reduced by ~10% */
  grid-template-columns: minmax(var(--left-min), var(--left-max)) 1fr minmax(var(--right-min), var(--right-max));
  gap:12px;padding:12px;height:calc(100vh - 92px)}
#palette,#properties{background:#fff;border-radius:8px;padding:12px;box-shadow:0 2px 10px rgba(2,6,23,0.08);position:relative}
/* panel header and controls */
.panel-header{display:flex;justify-content:space-between;align-items:center;margin:-6px -6px 8px -6px;padding:8px;border-radius:6px}
.panel-header h2{margin:0;font-size:16px}
.panel-controls{display:flex;gap:6px}
.collapse-toggle{background:transparent;border:3px solid transparent;padding:6px;border-radius:12px;cursor:pointer;display:flex;align-items:center;justify-content:center;min-width:176px;min-height:176px;font-size:88px}
.collapse-toggle:hover{background:#f1f5f9}
/* Larger, bolder appearance for mobile/touch */
.collapse-toggle{font-weight:900;color:#0b84ff}
.collapse-toggle:focus{outline:4px solid rgba(11,132,255,0.18);outline-offset:6px} 
/* panel handle shown when collapsed */
.panel-handle{display:none;position:absolute;top:50%;background:#fff;border:3px solid #e6e6e6;border-radius:14px;padding:14px;box-shadow:0 8px 28px rgba(2,6,23,0.16);cursor:pointer;z-index:100000;min-width:192px;min-height:192px;font-size:72px;display:flex;align-items:center;justify-content:center}
.panel-handle[data-target="left"]{left:0; transform:translate(-180%,-50%)}
.panel-handle[data-target="right"]{right:0; transform:translate(180%,-50%)}
.panel-handle:hover{background:#f7fafc;transform:scale(1.02)}
.panel-handle:active{transform:scale(0.98)}
/* collapsed states */
body.left-collapsed main{--left-min:36px; --left-max:36px}
body.left-collapsed #palette{padding:6px}
body.left-collapsed #palette .panel-header h2{display:none}
body.left-collapsed #palette .panel-controls{display:none}
body.left-collapsed #palette button{display:none}
/* show a fixed, prominent handle at the screen edge for reopening */
body.left-collapsed .panel-handle[data-target="left"]{display:flex;position:fixed;left:8px;top:72px;transform:none;min-width:44px;min-height:44px;border-radius:10px;padding:10px;box-shadow:0 6px 18px rgba(2,6,23,0.12);background:#fff;z-index:100001}

body.right-collapsed main{--right-min:36px; --right-max:36px}
body.right-collapsed #properties{padding:6px}
body.right-collapsed #properties .panel-header h2{display:none}
body.right-collapsed #properties .panel-controls{display:none}
body.right-collapsed #properties .prop-group{display:none}
body.right-collapsed #properties #props{display:none}
/* show a fixed, prominent handle at the screen edge for reopening */
body.right-collapsed .panel-handle[data-target="right"]{display:flex;position:fixed;right:12px;top:96px;transform:none;min-width:192px;min-height:192px;border-radius:14px;padding:14px;box-shadow:0 8px 28px rgba(2,6,23,0.14);background:#fff;z-index:100001;}
/* add a subtle pulse to draw attention */
@keyframes _opticspulse{0%{box-shadow:0 8px 28px rgba(2,6,23,0.06)}50%{box-shadow:0 8px 36px rgba(11,132,255,0.12)}100%{box-shadow:0 8px 28px rgba(2,6,23,0.06)}}
body.right-collapsed .panel-handle[data-target="right"]{animation:_opticspulse 1.6s ease-in-out 2}

/* ensure handle appears above other elements and is easy to tap */
.panel-handle{z-index:100000; padding:8px 10px; font-size:14px; line-height:1;}
.panel-handle:hover{background:#f7fafc}

/* subtle transitions */
#palette,#properties{transition: all 180ms ease}
.panel-handle{transition: opacity 160ms ease}

#viewport{position:relative;background:linear-gradient(180deg,#eef2ff 0%,#ffffff 100%);display:flex;align-items:center;justify-content:center;border-radius:8px;padding:8px;overflow:hidden}
canvas{max-width:100%;max-height:100%;width:auto;height:auto;display:block}
canvas{background:#fff;border:1px solid #ddd;border-radius:6px}
#overlay{position:absolute;left:12px;top:12px}
#controls{background:rgba(255,255,255,0.95);padding:8px;border-radius:6px;border:1px solid #e6e6e6}
#history-list .hist-item{padding:6px;border-radius:4px;margin-bottom:6px;border:1px solid #eee;background:#fff;cursor:pointer}
#history-list .hist-item:hover{background:#f7f9fc}
#history-list .hist-item.active{border-color:#0b84ff;background:#ebf5ff}
#app-error{white-space:pre-wrap}
#app-status.error{background:#8b0000}
#interaction-hint{box-shadow:0 4px 18px rgba(2,6,23,0.25)}
button{display:block;width:100%;padding:8px;border-radius:6px;border:1px solid #cbd5e1;background:#fff;margin-bottom:6px}
button:hover{background:#f1f5f9}
.prop-group{margin-top:10px}
.prop-group label{display:block;margin-bottom:8px}
.prop-actions{margin-top:12px}
.tip{font-size:12px;color:#6b7280}
footer{padding:12px 20px;color:#374151}
#no-selection{color:#6b7280}
#props strong{font-size:14px}
input[type=range]{width:100%}
input[type=number]{width:72px}
label span{float:right;font-weight:600}
